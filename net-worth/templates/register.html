{% extends "base.html" %}

{% block stylesheets %}
{% endblock %}

{% block content %}
<div class="auth-container">
	<div class="auth-panel">
		<div class="text-center mb-4">
			<a href="{{ url_for('views.static_html', route='/') }}" class="navbar-brand">
            {% if Configs.ctf_logo %}
                <img class="img-responsive ctf_logo" src="{{ url_for('views.files', path=Configs.ctf_logo) }}" height="25" alt="{{ Configs.ctf_name }}">
            {% else %}
                {{ Configs.ctf_name }}
            {% endif %}
        </a>
			<hr>
			<p class="text-secondary">Create your account to start competing</p>
		</div>
		
		<div>
			{% include "components/errors.html" %}

			{% if integrations.mlc() %}
			<a class="btn btn-secondary btn-block mb-3" href="{{ url_for('auth.oauth_login') }}">
				Register with Major League Cyber
			</a>
			<div class="text-center my-4">
				<span class="text-muted">or</span>
			</div>
			{% endif %}

			{% with form = Forms.auth.RegistrationForm() %}
			{% from "macros/forms.html" import render_extra_fields %}
			<form method="post" accept-charset="utf-8" autocomplete="off" role="form">
				<div class="form-group">
					<label>{{ form.name.label }}</label>
					{{ form.name(class="form-control", value=name) }}
					<small class="form-text text-muted">
						Your username on the site
					</small>
				</div>
				<div class="form-group">
					<label>{{ form.email.label }}</label>
					{{ form.email(class="form-control", value=email) }}
					<small class="form-text text-muted">
						Never shown to the public
					</small>
				</div>
				<div class="form-group">
					<label>{{ form.password.label }}</label>
					{{ form.password(class="form-control", value=password) }}
					<small class="form-text text-muted">
						Password used to log into your account
					</small>
				</div>

				{{ render_extra_fields(form.extra) }}

				{{ form.submit(class="btn btn-primary btn-block mb-3") }}
				
				<div class="text-center mt-4 pt-4" style="border-top: 1px solid var(--border);">
					<span class="text-secondary">Already have an account? </span>
					<a href="{{ url_for('auth.login') }}" class="text-decoration-none" style="color: var(--accent-teal);">Sign in here</a>
				</div>

				{% if Configs.tos_or_privacy %}
				<div class="text-center mt-3">
					<small class="text-muted">
						By registering, you agree to the
						<a href="{{ Configs.privacy_link }}" rel="noopener" target="_blank" style="color: var(--accent-teal);">privacy policy</a>
						and <a href="{{ Configs.tos_link }}" rel="noopener" target="_blank" style="color: var(--accent-teal);">terms of service</a>
					</small>
				</div>
				{% endif %}
				
				{{ form.nonce() }}
			</form>
			{% endwith %}
		</div>
	</div>
</div>
{% endblock %}

{% block scripts %}
{% endblock %}
